<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¸¬è©¦100å‰‡è¨˜äº‹åŠŸèƒ½</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f0f0f0;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #45a049;
        }
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-fill {
            height: 100%;
            background: #4CAF50;
            transition: width 0.5s ease;
        }
        .todo-item {
            background: #f9f9f9;
            padding: 8px;
            margin: 3px 0;
            border-radius: 3px;
            border-left: 3px solid #4CAF50;
            font-size: 0.9rem;
        }
        .stats {
            display: flex;
            justify-content: space-around;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .stat-item {
            text-align: center;
        }
        .stat-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: #4CAF50;
        }
        .stat-label {
            font-size: 0.9rem;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª æ¸¬è©¦100å‰‡è¨˜äº‹åŠŸèƒ½</h1>
        
        <div class="test-section">
            <h3>å¿«é€Ÿæ¸¬è©¦åŠŸèƒ½</h3>
            <button onclick="createTestTodos(10)">æ–°å¢10å‰‡æ¸¬è©¦è¨˜äº‹</button>
            <button onclick="createTestTodos(50)">æ–°å¢50å‰‡æ¸¬è©¦è¨˜äº‹</button>
            <button onclick="createTestTodos(100)">æ–°å¢100å‰‡æ¸¬è©¦è¨˜äº‹</button>
            <button onclick="clearAllTodos()">æ¸…é™¤æ‰€æœ‰è¨˜äº‹</button>
            <button onclick="testLocalStorage()">æ¸¬è©¦æœ¬åœ°å„²å­˜</button>
        </div>
        
        <div class="test-section">
            <h3>è¨˜äº‹çµ±è¨ˆ</h3>
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-number" id="totalCount">0</div>
                    <div class="stat-label">ç¸½è¨ˆ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="completedCount">0</div>
                    <div class="stat-label">å·²å®Œæˆ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="pendingCount">0</div>
                    <div class="stat-label">å¾…å®Œæˆ</div>
                </div>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div id="progressText" style="text-align: center; font-weight: bold;">0% (0/100)</div>
        </div>
        
        <div class="test-section">
            <h3>è¨˜äº‹åˆ—è¡¨ (æœ€å¤šé¡¯ç¤ºå‰20å‰‡)</h3>
            <div id="todoDisplay"></div>
        </div>
        
        <div class="test-section">
            <h3>æ§åˆ¶å°è¼¸å‡º</h3>
            <p>è«‹é–‹å•Ÿç€è¦½å™¨çš„é–‹ç™¼è€…å·¥å…·ï¼ˆF12ï¼‰æŸ¥çœ‹æ§åˆ¶å°è¼¸å‡º</p>
            <p>åœ¨æ‰‹æ©Ÿä¸Šï¼Œè«‹ä½¿ç”¨ç€è¦½å™¨çš„é–‹ç™¼è€…å·¥å…·æˆ–æŸ¥çœ‹æ§åˆ¶å°</p>
        </div>
    </div>

    <script>
        let todos = [];
        const maxTodos = 100;
        
        // é é¢è¼‰å…¥æ™‚è®€å–ç¾æœ‰è¨˜äº‹
        window.onload = function() {
            console.log('=== æ¸¬è©¦é é¢è¼‰å…¥ ===');
            loadTodos();
            updateDisplay();
        };
        
        function loadTodos() {
            try {
                const storedTodos = localStorage.getItem('todos');
                console.log('å¾localStorageè®€å–çš„æ•¸æ“š:', storedTodos);
                
                if (storedTodos) {
                    todos = JSON.parse(storedTodos);
                    console.log('è§£æå¾Œçš„è¨˜äº‹:', todos);
                    console.log('è¨˜äº‹æ•¸é‡:', todos.length);
                } else {
                    todos = [];
                    console.log('localStorageä¸­æ²’æœ‰æ•¸æ“š');
                }
            } catch (error) {
                console.error('è®€å–localStorageæ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
                todos = [];
            }
        }
        
        function saveTodos() {
            try {
                const todosJson = JSON.stringify(todos);
                console.log('æº–å‚™å„²å­˜åˆ°localStorageçš„æ•¸æ“šé•·åº¦:', todosJson.length);
                
                localStorage.setItem('todos', todosJson);
                
                // é©—è­‰å„²å­˜
                const storedData = localStorage.getItem('todos');
                if (storedData) {
                    console.log('å„²å­˜æˆåŠŸï¼è¨˜äº‹æ•¸é‡:', todos.length);
                } else {
                    console.error('å„²å­˜å¤±æ•—');
                }
            } catch (error) {
                console.error('å„²å­˜å¤±æ•—:', error);
            }
        }
        
        function createTestTodos(count) {
            console.log(`=== æ–°å¢ ${count} å‰‡æ¸¬è©¦è¨˜äº‹ ===`);
            
            const currentCount = todos.length;
            const canAdd = Math.min(count, maxTodos - currentCount);
            
            if (canAdd <= 0) {
                alert('å·²é”åˆ°100å‰‡è¨˜äº‹é™åˆ¶ï¼');
                return;
            }
            
            for (let i = 0; i < canAdd; i++) {
                const todo = {
                    id: Date.now() + i,
                    text: `æ¸¬è©¦è¨˜äº‹ ${currentCount + i + 1}`,
                    date: new Date().toISOString().split('T')[0],
                    color: '#000000',
                    completed: false,
                    createdAt: new Date().toISOString()
                };
                
                todos.push(todo);
                console.log(`æ–°å¢è¨˜äº‹ ${i + 1}:`, todo);
            }
            
            console.log(`æˆåŠŸæ–°å¢ ${canAdd} å‰‡è¨˜äº‹ï¼Œç¸½è¨ˆ: ${todos.length}`);
            
            saveTodos();
            updateDisplay();
        }
        
        function clearAllTodos() {
            if (confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰è¨˜äº‹å—ï¼Ÿ')) {
                todos = [];
                localStorage.removeItem('todos');
                console.log('æ‰€æœ‰è¨˜äº‹å·²æ¸…é™¤');
                updateDisplay();
            }
        }
        
        function testLocalStorage() {
            console.log('=== æ¸¬è©¦æœ¬åœ°å„²å­˜ ===');
            console.log('localStorage å¯ç”¨:', typeof(Storage) !== "undefined");
            console.log('JSON å¯ç”¨:', typeof(JSON) !== "undefined");
            console.log('ç•¶å‰è¨˜äº‹æ•¸é‡:', todos.length);
            console.log('localStorage ä¸­çš„æ•¸æ“š:', localStorage.getItem('todos'));
        }
        
        function updateDisplay() {
            // æ›´æ–°çµ±è¨ˆ
            const total = todos.length;
            const completed = todos.filter(todo => todo.completed).length;
            const pending = total - completed;
            
            document.getElementById('totalCount').textContent = total;
            document.getElementById('completedCount').textContent = completed;
            document.getElementById('pendingCount').textContent = pending;
            
            // æ›´æ–°é€²åº¦æ¢
            const percentage = Math.min((total / maxTodos) * 100, 100);
            document.getElementById('progressFill').style.width = `${percentage}%`;
            document.getElementById('progressText').textContent = `${Math.round(percentage)}% (${total}/${maxTodos})`;
            
            // æ›´æ–°è¨˜äº‹é¡¯ç¤º
            const display = document.getElementById('todoDisplay');
            if (todos.length === 0) {
                display.innerHTML = '<p>æ²’æœ‰è¨˜äº‹</p>';
                return;
            }
            
            // åªé¡¯ç¤ºå‰20å‰‡è¨˜äº‹ä»¥é¿å…é é¢éé•·
            const displayTodos = todos.slice(0, 20);
            display.innerHTML = displayTodos.map(todo => `
                <div class="todo-item">
                    <strong>${todo.text}</strong> | 
                    æ—¥æœŸ: ${todo.date} | 
                    ç‹€æ…‹: ${todo.completed ? 'å·²å®Œæˆ' : 'æœªå®Œæˆ'} | 
                    ID: ${todo.id}
                </div>
            `).join('');
            
            if (todos.length > 20) {
                display.innerHTML += `<p style="text-align: center; color: #666; margin-top: 10px;">
                    é‚„æœ‰ ${todos.length - 20} å‰‡è¨˜äº‹æœªé¡¯ç¤º...
                </p>`;
            }
        }
    </script>
</body>
</html>
